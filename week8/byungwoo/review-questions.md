# AWS 공인 솔루션스 아키텍트 – 어소시에이트 연습문제 1 오답/풀이

## 1.
클라우드 아키텍처는 Linux 및 Windows EC2 인스턴스로 구성되어 있으며, 이 인스턴스는 대량의 데이터를 24시간, 일주일에 7일 처리합니다. 시스템의 고가용성을 보장하려면 모든 인스턴스의 메모리 및 디스크 사용률을 모니터링해야 합니다.
다음 중 구현하기에 가장 적합한 모니터링 솔루션은 무엇입니까?
- Amazon Inspector를 사용하고 모든 EC2 인스턴스에 Inspector 에이전트를 설치합니다.
- (정답) 메모리 및 디스크 사용률 데이터를 수집하는 모든 EC2 인스턴스에 CloudWatch 에이전트를 설치하고 Amazon CloudWatch 콘솔에서 사용자 지정 메트릭을 봅니다.
- 메모리 및 디스크 사용률 메트릭을 이미 사용할 수 있는 EC2 인스턴스에 기본 CloudWatch 구성을 사용합니다. 모든 EC2 인스턴스에 AWS SSM(AWS Systems Manager) 에이전트를 설치합니다.
- (선택) EC2에서 확장 모니터링 옵션을 사용하도록 설정하고 모든 EC2 인스턴스에 CloudWatch 에이전트를 설치하여 CloudWatch 대시보드에서 메모리 및 디스크 사용률을 볼 수 있습니다.
```markdown
# CloudWatch 기본 메트릭
- 기본 메트릭: CPU 사용률, 네트워크 사용률, 디스크 성능 및 디스크 읽기/쓰기 모니터링 등
- https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/viewing_metrics_with_cloudwatch.html

# CloudWatch 사용자 메트릭
- 아래와 같이 기본 메트릭 이외의 항목을 모니터링 해야하는 경우 Perl 또는 Bash 스크립트 사용 필요
- ex) 메모리 활용, 디스크 스왑 활용, 디스크 공간 활용, 페이지 파일 활용, 로그 수집
- https://aws.amazon.com/ko/blogs/korea/amazon-cloudwatch-custom-metrics/

# 확장 모니터링 (Enhanced Monitoring)
- EC2가 아닌 RDS의 기능 
- Enhanced Monitoring을 통해 DB 인스턴스의 운영 체제를 실시간으로 모니터링할 수 있음
- https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/UserGuide/USER_Monitoring.OS.overview.html

# Amazon Inspector
- Amazon EC2 인스턴스의 네트워크 액세스 가능성과 인스턴스에서 실행 중인 응용 프로그램의 보안 상태를 테스트하는 데 도움이 되는 자동 보안 평가 서비스
- https://docs.aws.amazon.com/ko_kr/managedservices/latest/userguide/inspector.html
```

## 6.
애플리케이션은 EC2 인스턴스에서 빅데이터 워크로드를 실행합니다. 애플리케이션은 최소 허용 성능 임계값을 유지하려면 최소 10개 이상의 인스턴스가 필요하고 워크로드의 급증 문제를 처리하려면 100개 인스턴스가 필요합니다. 애플리케이션에 의해 처리된 과거 워크로드를 기준으로 하면 80%의 인스턴스가 필요합니다.
안정적인 상태에서 워크로드 수요를 충족할 수 있도록 비용 최적 솔루션으로 권장하고 싶은 것은 다음 중 무엇입니까?
- (정답) 예약 인스턴스 80 개를 구매하고 워크로드 요구에 따라 추가 온디맨드 및 스팟 인스턴스를 프로비저닝합니다.
- 온디맨드 인스턴스 80개를 구매합니다. 워크로드 요구에 따라 추가 온디맨드 및 스팟 인스턴스를 프로비저닝 합니다.
- (선택) 온디맨드 인스턴스 80개를 구매합니다. Auto Scaling Group을 사용하여 워크로드 요구에 따라 나머지 인스턴스를 스팟 인스턴스로 프로비저닝 합니다.
- 스팟 인스턴스 80개를 구매합니다. Auto Scaling Group을 사용하여 워크로드 요구에 따라 나머지 인스턴스를 온디맨드 인스턴스로 프로비저닝 합니다.
```markdown
- 키워드: 안정적인 상태, 비용 최적
- 해설: 100개 인스턴스 중에서 80%의 인스턴스가 필요하는 것이 예측 가능하므로 예약 인스턴스 80개를 요청하는 것이 비용효율적

# 온디맨드 인스턴스: 실행하는 인스턴스에 따라 시간당 또는 초당 컴퓨팅 파워에 대한 비용 지불
- 선결제 금액이나 장기 약정 없이 저렴하고 유연하게 EC2를 사용할 경우
- 단기의 갑작스럽거나 예측할 수 없는 워크로드가 있으며, 중단되어서는 안 되는 애플리케이션
- EC2에서 처음으로 개발 또는 시험 중인 애플리케이션

# 스팟 인스턴스: 온디맨드 요금보다 최대 90% 할인된 가격 예비 EC2 요청
- 시작 및 종료 시간이 자유로운 애플리케이션
- 컴퓨팅 가격이 매우 저렴해야만 수익이 나는 애플리케이션
- 대량의 서버 용량 추가로 긴급히 컴퓨팅 파워가 필요한 사용자

# Savings Plans: 1년 또는 3년 기간의 일정 사용량 약정(시간당 요금을 기준으로 측정)을 조건으로 EC2 및 Fargate 사용량에 대해 저렴한 요금을 제공하는 유연한 요금 모델

# 예약 인스턴스: 온디맨드 인스턴스 요금과 비교하여 상당한 할인 혜택(최대 75%)을 제공. 용량 예약이 제공되므로 필요할 때 예약한 인스턴스 시작 보장.
- 수요가 꾸준한 애플리케이션
- 예약 용량이 필요할 수 있는 애플리케이션
- 총 컴퓨팅 비용을 절감하기 위해 1년 또는 3년 동안 EC2를 사용하기로 약정할 수 있는 고객

# 전용 호스팅: 고객 전용의 물리적 EC2 서버. 소프트웨어 라이선스를 가능. 규정 준수 요구 사항도 충족 가능.
```

## 12.
현재 Amazon SQS에서 표준 대기열을 사용하고 있는 웹 기반 주문 처리 시스템이 있습니다. 지원팀은 주문이 두 번 처리된 사례가 많다는 것을 알게 되었습니다. 이 문제로 인해 처리 과정에서 많은 문제가 발생하여 고객이 매우 불만족스러워하고 있습니다. IT 관리자가 이 문제가 다시 발생하지 않도록 요청했습니다.
앞으로 이런 일이 다시 발생하지 않도록 하려면 어떻게 해야 합니까? (2 개 선택)
- (정답) Amazon SQS FIFO 대기열을 사용합니다.
- (선택) SQS에서 메시지 크기를 변경합니다.
- (정답) Amazon SQS를 교체하고 대신 Amazon Simple Workflow 서비스를 사용합니다.
- (선택) SQS의 제한 시간 초과를 변경합니다.
- Amazon SQS의 보존 기간을 변경합니다.
```markdown
- 키워드: 주문이 두 번 처리되는 사례가 많음
- 해설: 단순히 SQS의 설정을 바꾸는 것으로는 중복처리 방지가 불가한 것 같음. SQS 대기열의 종류를 변경하거나 순서를 보장하는 서비스를 사용해야 함. 

# Amazon SQS FIFO
- 작업 및 이벤트 순서가 중요하거나 중복 항목이 허용되지 않는 경우에 사용
- ex) 사용자가 입력한 명령이 올바른 순서로 실행되도록 보장
- ex) 가격 수정을 올바른 순서로 전송하여 올바른 제품 가격 표시
- ex) 학생이 계정 등록 전에 과정에 등록하지 못하도록 차단
- FIFO 대기열은 정확히 1회 처리를 제공하지만 초당 트랜잭션(TPS) 수가 제한적

# Amazon Simple Workflow Service (SWF)
-  분산된 구성 요소 간에 작업을 조정하는 애플리케이션을 쉽게 구축할 수 있는 서비스
- https://docs.aws.amazon.com/ko_kr/amazonswf/latest/developerguide/swf-dev-about-workflows.html
- 워크플로는 여러 컴퓨팅 디바이스에서 비동기식으로 실행할 수 있고 순차 및 병렬 처리가 특징일 수 있는 활동의 실행을 조정 및 관리
```

## 19.
무단 액세스로부터 엔터프라이즈 애플리케이션을 보호하려면 VPC에 네트워크 ACL에 대한 여러 규칙을 구성해야 합니다. 액세스 규칙은 어떻게 평가됩니까?
- (선택) 네트워크 ACL 규칙은 규칙 번호에 따라 가장 높은 규칙부터 가장 낮은 규칙까지 평가되며 일치하는 허용/거부 규칙이 발견되면 즉시 실행됩니다.
- (정답) 네트워크 ACL 규칙은 규칙 번호에 따라 가장 낮은 규칙부터 가장 높은 규칙까지 평가되며 일치하는 허용/거부 규칙이 발견되면 즉시 실행됩니다.
- 네트워크 ACL 규칙은 가장 낮은 규칙부터 가장 높은 규칙까지 규칙 번호로 평가되며 충돌/허용 규칙에 대해 모든 규칙을 검사한 후에 실행됩니다.
- 기본적으로 모든 네트워크 ACL 규칙은 트래픽이 허용되거나 거부되기 전에 평가됩니다.
```markdown
- 해설: 낮은 번호 -> 높은 번호 순으로 평가되는데 번역상 낮은 규칙이라고 해서 우선순위가 낮은 규칙이라고 생각하여 오답
# Network Access Control List (NACL)
- 네트워크 ACL(액세스 제어 목록)은 1개 이상의 서브넷 내부와 외부의 트래픽을 제어하기 위한 방화벽 역할을 하는 VPC를 위한 선택적 보안 계층
- 보안 그룹과 비슷한 규칙으로 네트워크 ACL을 설정하여 VPC에 보안 계층을 더 추가할 수 있음
- NACL Rules
  - Rules have a number (1-32766), higher precedence with a lower number
  - First rule match will drive the decision
  - ex) if you define #100 ALLOW 10.0.0.10/32 and #200 DENY 10.0.0.10/32, the IP address will be allowed because 100 has a higher precedence over 200
  - The last rule is an asterisk (*) and denies a request in case of no rule match
  - AWS recommends adding rules by increment of 100
```

## 21.
당신은 회사의 Solutions Architect로 일하고 있으며 최고 기술 책임자는 귀사의 모든 애플리케이션을 AWS로 마이그레이션하려고 합니다. 모든 데이터를 저장할 블록 스토리지를 찾고 있으며 EBS 볼륨과 함께 사용하기로 결정했습니다. 상사는 규정 준수 요구 사항, 다운타임 시나리오 및 IOPS 성능으로 인해 EBS 볼륨이 워크로드에 적합하지 않다고 우려하고 있습니다.
다음 중 EBS가 마이그레이션에 가장 적합한 서비스임을 입증하는 데 유효한 사항은 무엇입니까? (2개 선택)
- 가용 영역에서 EBS 볼륨을 생성하면 개별 AWS 영역에 자동으로 복제되어 단일 하드웨어 구성 요소 오류로 인한 데이터 손실을 방지합니다.
- (선택) EBS 볼륨을 가용 영역의 모든 EC2 인스턴스에 연결할 수 있습니다.
- (선택/정답) EBS 볼륨은 인스턴스의 수명과는 독립적으로 유지될 수 있는 오프인스턴스 스토리지입니다.
- (정답) EBS 볼륨은 프로덕션 중에 실시간 구성 변경을 지원하므로 서비스 중단 없이 볼륨 유형, 볼륨 크기 및 IOPS 용량을 수정할 수 있습니다.
- Amazon EBS는 EBS 볼륨의 스냅샷(백업)을 생성하고 볼륨의 데이터 복사본을 Amazon RDS에 쓰는 기능을 제공합니다. 이 기능은 여러 가용 영역에 중복으로 저장됩니다.
```bash
- 키워드: 다운타임 시나리오, IOPS 성능
- 가용 영역에서 EBS 볼륨을 생성하면 개별 AWS 영역에 자동으로 복제되어 단일 하드웨어 구성 요소 오류로 인한 데이터 손실을 방지합니다. -> EBS 볼륨은 '특정/단일/해당' 가용 영역에 위치하며 여기에서 자동으로 복제됨. "개별 AWS 영역"이 "each AWS region"을 의미하는 것 같은데 번역이 모호하게 된 것으로 추측.
- EBS 볼륨을 가용 영역의 모든 EC2 인스턴스에 연결할 수 있습니다. -> EBS는 기본적으로 한 번에 하나의 인스턴스만 연결 가능. 여러 인스턴스이 '동시에' 연결이 가능하다는 의미인 것 같은데 부착과 결합이 자유롭다는 의미로 해석 (번역이 정확하게 된 것 같지 않음)
- EBS 볼륨은 프로덕션 중에 실시간 구성 변경을 지원하므로 서비스 중단 없이 볼륨 유형, 볼륨 크기 및 IOPS 용량을 수정할 수 있습니다. -> 무중단으로 변경 가능한 줄 몰랐음
```